---
// src/pages/index.astro
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('blog');
const sortedPosts = posts.sort((a, b) => new Date(b.data.date) - new Date(a.data.date));
---

<Layout title="Vihar Gandhi - Portfolio">
  <header>
    <div class="profile-photo"></div>
    <div class="header-text">
      <h1>Vihar Gandhi</h1>
      <p class="description">
        Be visionary work super hard get obsessed and leave it on god
      </p>
    </div>
  </header>

  <main>
    <section id="blogs">
      <h2>Blogs</h2>
      <ul class="blogs-list">
        {sortedPosts.map(post => (
          <li class="blog-item">
            <a href={`/${post.slug}/`} class="blog-title">{post.data.title}</a>
            <span class="blog-date">
              {new Date(post.data.date).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
            </span>
          </li>
        ))}
      </ul>
    </section>
  </main>

  <footer>
    <a href="https://x.com/_Vihar" target="_blank" title="Follow me on X">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
      </svg>
    </a>
  </footer>
</Layout>
